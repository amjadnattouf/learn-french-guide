<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Apprenons le fran√ßais √† Besan√ßon - Guide des Formations</title>

		<style>
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			:root {
				--primary-color: #0055a4;
				--secondary-color: #ef4135;
				--white: #ffffff;
				--light-gray: #f8f9fa;
				--dark-gray: #333;
				--success: #28a745;
				--warning: #ffc107;
			}

			body {
				font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
				line-height: 1.6;
				color: var(--dark-gray);
				background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
				min-height: 100vh;
				padding: 20px;
			}

			.language-selector {
				position: fixed;
				top: 20px;
				right: 20px;
				z-index: 1000;
				background: white;
				padding: 10px 15px;
				border-radius: 25px;
				box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
			}

			.language-selector select {
				border: none;
				background: transparent;
				font-size: 16px;
				cursor: pointer;
				padding: 5px;
				color: var(--primary-color);
				font-weight: bold;
			}

			.container {
				max-width: 1200px;
				margin: 0 auto;
			}

			header {
				text-align: center;
				padding: 40px 20px;
				background: white;
				border-radius: 20px;
				margin: 60px 0 30px;
				box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
			}

			header h1 {
				color: var(--primary-color);
				font-size: 2.5em;
				margin-bottom: 10px;
				display: flex;
				align-items: center;
				justify-content: center;
				gap: 15px;
				flex-wrap: wrap;
			}

			.subtitle {
				color: var(--secondary-color);
				font-size: 1.2em;
				margin-top: 10px;
			}

			.selection-section {
				background: white;
				padding: 40px;
				border-radius: 20px;
				margin: 30px 0;
				box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
			}

			.selection-section h2 {
				color: var(--primary-color);
				margin-bottom: 20px;
				font-size: 1.8em;
				text-align: center;
			}

			.question-block {
				background: var(--light-gray);
				padding: 25px;
				border-radius: 15px;
				margin-bottom: 25px;
			}

			.question-block h3 {
				color: var(--dark-gray);
				margin-bottom: 15px;
				font-size: 1.2em;
			}

			.options-grid {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
				gap: 15px;
				margin-top: 15px;
			}

			.option-btn {
				padding: 15px 20px;
				background: white;
				border: 3px solid #ddd;
				border-radius: 12px;
				cursor: pointer;
				transition: all 0.3s;
				text-align: center;
				font-size: 16px;
				font-weight: 600;
				color: var(--dark-gray);
			}

			.option-btn:hover {
				border-color: var(--primary-color);
				background: #f0f7ff;
				transform: translateY(-2px);
			}

			.option-btn.selected {
				border-color: var(--primary-color);
				background: var(--primary-color);
				color: white;
			}

			.find-courses-btn {
				background: var(--secondary-color);
				color: white;
				padding: 18px 50px;
				border: none;
				border-radius: 12px;
				font-size: 1.2em;
				font-weight: bold;
				cursor: pointer;
				width: 100%;
				max-width: 400px;
				display: block;
				margin: 30px auto;
				transition: all 0.3s;
			}

			.find-courses-btn:hover {
				background: #c93529;
				transform: translateY(-3px);
				box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
			}

			.find-courses-btn:disabled {
				background: #ccc;
				cursor: not-allowed;
				transform: none;
			}

			.results-section {
				background: white;
				padding: 40px;
				border-radius: 20px;
				margin: 30px 0;
				box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
				display: none;
			}

			.results-section.show {
				display: block;
				animation: slideIn 0.5s ease-out;
			}

			@keyframes slideIn {
				from {
					opacity: 0;
					transform: translateY(20px);
				}
				to {
					opacity: 1;
					transform: translateY(0);
				}
			}

			.results-section h2 {
				color: var(--primary-color);
				margin-bottom: 20px;
				font-size: 2em;
				text-align: center;
			}

			.info-box {
				background: #e7f3ff;
				border-left: 5px solid var(--primary-color);
				padding: 20px;
				margin: 20px 0;
				border-radius: 8px;
			}

			.info-box.warning {
				background: #fff3cd;
				border-left-color: var(--warning);
			}

			.info-box.success {
				background: #d4edda;
				border-left-color: var(--success);
			}

			.course-card {
				background: white;
				border: 2px solid #e0e0e0;
				border-radius: 15px;
				padding: 25px;
				margin: 20px 0;
				transition: all 0.3s;
			}

			.course-card:hover {
				box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
				transform: translateY(-3px);
			}

			.course-header {
				display: flex;
				justify-content: space-between;
				align-items: start;
				margin-bottom: 15px;
				flex-wrap: wrap;
				gap: 10px;
			}

			.course-title {
				color: var(--primary-color);
				font-size: 1.5em;
				font-weight: bold;
			}

			.course-price {
				background: var(--success);
				color: white;
				padding: 8px 20px;
				border-radius: 20px;
				font-weight: bold;
				font-size: 1.1em;
			}

			.course-price.free {
				background: var(--success);
			}

			.course-price.paid {
				background: var(--warning);
				color: var(--dark-gray);
			}

			.course-details {
				margin: 15px 0;
			}

			.detail-item {
				display: flex;
				align-items: start;
				margin: 10px 0;
				gap: 10px;
			}

			.detail-icon {
				font-size: 1.2em;
				min-width: 25px;
			}

			.course-tag {
				display: inline-block;
				padding: 5px 15px;
				background: var(--light-gray);
				border-radius: 15px;
				margin: 5px 5px 5px 0;
				font-size: 0.9em;
			}

			.contact-info {
				background: var(--light-gray);
				padding: 15px;
				border-radius: 10px;
				margin-top: 15px;
			}

			footer {
				text-align: center;
				padding: 30px;
				background: white;
				border-radius: 20px;
				margin-top: 30px;
				box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
			}

			.hidden {
				display: none;
			}

			@media (max-width: 768px) {
				header h1 {
					font-size: 1.8em;
				}

				.selection-section,
				.results-section {
					padding: 20px;
				}

				.options-grid {
					grid-template-columns: 1fr;
				}
			}

			.recommendation-badge {
				display: inline-block;
				background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
				color: white;
				padding: 5px 15px;
				border-radius: 20px;
				font-size: 0.9em;
				font-weight: bold;
				margin-left: 10px;
			}

			.search-filter-section {
				background: var(--light-gray);
				padding: 30px;
				border-radius: 15px;
				margin-bottom: 30px;
			}

			.search-grid {
				display: grid;
				grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
				gap: 20px;
				margin-bottom: 20px;
			}

			.search-input-group {
				display: flex;
				flex-direction: column;
				gap: 8px;
			}

			.search-input-group label {
				font-weight: 600;
				color: var(--dark-gray);
				font-size: 0.95em;
			}

			.search-input-group input,
			.search-input-group select {
				padding: 12px 15px;
				border: 2px solid #ddd;
				border-radius: 8px;
				font-size: 16px;
				transition: all 0.3s;
			}

			.search-input-group input:focus,
			.search-input-group select:focus {
				outline: none;
				border-color: var(--primary-color);
				box-shadow: 0 0 0 3px rgba(0, 85, 164, 0.1);
			}

			.reset-filter-btn {
				background: var(--dark-gray);
				color: white;
				padding: 12px 30px;
				border: none;
				border-radius: 8px;
				font-size: 16px;
				font-weight: 600;
				cursor: pointer;
				transition: all 0.3s;
				display: block;
				margin: 0 auto;
			}

			.reset-filter-btn:hover {
				background: #555;
				transform: translateY(-2px);
			}

			.course-card.hidden {
				display: none;
			}

			.view-controls {
				display: flex;
				justify-content: space-between;
				align-items: center;
				margin-top: 20px;
				gap: 15px;
				flex-wrap: wrap;
			}

			.view-toggle {
				display: flex;
				gap: 10px;
				background: white;
				padding: 5px;
				border-radius: 10px;
				box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
			}

			.view-btn {
				padding: 12px 25px;
				background: transparent;
				border: none;
				border-radius: 8px;
				cursor: pointer;
				font-size: 16px;
				font-weight: 600;
				color: var(--dark-gray);
				transition: all 0.3s;
				display: flex;
				align-items: center;
				gap: 8px;
			}

			.view-btn:hover {
				background: var(--light-gray);
			}

			.view-btn.active {
				background: var(--primary-color);
				color: white;
			}

			.view-container {
				margin-top: 30px;
			}

			.map-container {
				width: 100%;
				height: 600px;
				border-radius: 15px;
				overflow: hidden;
				box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
				margin-bottom: 20px;
			}

			.map-legend {
				background: var(--light-gray);
				padding: 20px;
				border-radius: 15px;
				margin-top: 20px;
			}

			.map-legend h4 {
				color: var(--primary-color);
				margin-bottom: 15px;
				font-size: 1.2em;
			}

			.legend-item {
				display: flex;
				align-items: start;
				padding: 12px;
				background: white;
				border-radius: 8px;
				margin-bottom: 10px;
				gap: 12px;
				cursor: pointer;
				transition: all 0.3s;
			}

			.legend-item:hover {
				background: #f0f7ff;
				transform: translateX(5px);
				box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
			}

			.legend-marker {
				font-size: 1.5em;
				min-width: 30px;
			}

			.legend-info {
				flex: 1;
			}

			.legend-name {
				font-weight: bold;
				color: var(--primary-color);
				margin-bottom: 5px;
			}

			.legend-address {
				font-size: 0.9em;
				color: #666;
			}

			@media (max-width: 768px) {
				.search-grid {
					grid-template-columns: 1fr;
				}

				.view-controls {
					flex-direction: column;
					align-items: stretch;
				}

				.view-toggle {
					width: 100%;
				}

				.view-btn {
					flex: 1;
					justify-content: center;
				}

				.reset-filter-btn {
					width: 100%;
				}

				.map-container {
					height: 400px;
				}
			}
		</style>
	</head>
	<body>
		<div class="language-selector">
			<select id="languageSelect" onchange="changeLanguage()">
				<option value="fr">üá´üá∑ Fran√ßais</option>
				<option value="en">üá¨üáß English</option>
				<option value="es">üá™üá∏ Espa√±ol</option>
				<option value="ar">üá∏üá¶ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
			</select>
		</div>

		<div class="container">
			<header>
				<h1>
					<span>üá´üá∑</span>
					<!-- <span id="mainTitle">O√π Apprendre le Fran√ßais ?</span> -->
					<span id="mainTitle"
						>Apprenons le fran√ßais √† Besan√ßon"</span
					>
				</h1>
				<p class="subtitle" id="subtitle">
					Trouvez les formations adapt√©es √† votre situation
				</p>
			</header>

			<section class="selection-section">
				<h2 id="selectionTitle">Votre Situation</h2>
				<p
					id="selectionDesc"
					style="
						text-align: center;
						margin-bottom: 30px;
						font-size: 1.1em;
					"
				>
					R√©pondez aux questions suivantes pour trouver les formations
					qui vous correspondent
				</p>

				<div class="question-block">
					<h3 id="contractQuestion">
						üìã Avez-vous un contrat CIR (Contrat d'Int√©gration
						R√©publicaine) ?
					</h3>
					<div class="options-grid">
						<button
							class="option-btn"
							onclick="selectOption('contract', 'oui', this)"
							data-value="oui"
						>
							<span id="yesOption">‚úÖ Oui</span>
						</button>
						<button
							class="option-btn"
							onclick="selectOption('contract', 'non', this)"
							data-value="non"
						>
							<span id="noOption">‚ùå Non</span>
						</button>
						<button
							class="option-btn"
							onclick="selectOption('contract', 'ne_sais_pas', this)"
							data-value="ne_sais_pas"
						>
							<span id="dontKnowOption">ü§î Je ne sais pas</span>
						</button>
					</div>
				</div>

				<div class="question-block">
					<h3 id="poliQuestion">
						üèõÔ∏è √ätes-vous enregistr√© √† France Travail ?
					</h3>
					<div class="options-grid">
						<button
							class="option-btn"
							onclick="selectOption('poli', 'oui', this)"
							data-value="oui"
						>
							<span id="yesOption2">‚úÖ Oui</span>
						</button>
						<button
							class="option-btn"
							onclick="selectOption('poli', 'non', this)"
							data-value="non"
						>
							<span id="noOption2">‚ùå Non</span>
						</button>
						<button
							class="option-btn"
							onclick="selectOption('poli', 'ne_sais_pas', this)"
							data-value="ne_sais_pas"
						>
							<span id="dontKnowOption2">ü§î Je ne sais pas</span>
						</button>
					</div>
				</div>

				<div class="question-block">
					<h3 id="levelQuestion">
						üìö Quel est votre niveau actuel de fran√ßais ?
					</h3>
					<div class="options-grid">
						<button
							class="option-btn"
							onclick="selectOption('level', 'debutant', this)"
							data-value="debutant"
						>
							<span id="beginnerOption">üå± D√©butant (A1-A2)</span>
						</button>
						<button
							class="option-btn"
							onclick="selectOption('level', 'intermediaire', this)"
							data-value="intermediaire"
						>
							<span id="intermediateOption"
								>üìñ Interm√©diaire (B1-B2)</span
							>
						</button>
						<button
							class="option-btn"
							onclick="selectOption('level', 'avance', this)"
							data-value="avance"
						>
							<span id="advancedOption">üéì Avanc√© (C1-C2)</span>
						</button>
					</div>
				</div>

				<button
					class="find-courses-btn"
					id="findCoursesBtn"
					onclick="findCourses()"
					disabled
				>
					<span id="findBtnText">üîç Trouver les formations</span>
				</button>
			</section>

			<section class="results-section" id="resultsSection">
				<h2 id="resultsTitle">üìö Formations Recommand√©es</h2>

				<div class="search-filter-section">
					<h3
						id="searchTitle"
						style="color: var(--primary-color); margin-bottom: 20px"
					>
						üîç Affiner votre recherche
					</h3>
					<div class="search-grid">
						<div class="search-input-group">
							<label for="searchName" id="searchNameLabel"
								>üè´ Nom de l'acad√©mie</label
							>
							<input
								type="text"
								id="searchName"
								placeholder="Ex: Alliance Fran√ßaise, OFII..."
								oninput="filterResults()"
							/>
						</div>
						<div class="search-input-group">
							<label for="searchPlace" id="searchPlaceLabel"
								>üìç Lieu</label
							>
							<input
								type="text"
								id="searchPlace"
								placeholder="Ex: Besan√ßon, Paris..."
								oninput="filterResults()"
							/>
						</div>
						<div class="search-input-group">
							<label
								for="searchResidence"
								id="searchResidenceLabel"
								>üè† O√π habitez-vous ?</label
							>
							<input
								type="text"
								id="searchResidence"
								placeholder="Ex: Centre-ville, Planoise..."
								oninput="filterResults()"
							/>
						</div>
						<div class="search-input-group">
							<label for="searchType" id="searchTypeLabel"
								>üí∞ Type de cours</label
							>
							<select id="searchType" onchange="filterResults()">
								<option value="">-- Tous --</option>
								<option value="gratuit" id="freeOption">
									Gratuit
								</option>
								<option value="payant" id="paidOption">
									Payant
								</option>
								<option value="en_ligne" id="onlineOption">
									En ligne
								</option>
								<option value="en_personne" id="inPersonOption">
									En personne
								</option>
							</select>
						</div>
						<div class="search-input-group">
							<label for="sortBy" id="sortLabel"
								>üìä Trier par</label
							>
							<select id="sortBy" onchange="sortResults()">
								<option
									value="recommended"
									id="sortRecommended"
								>
									Recommand√©s d'abord
								</option>
								<option value="price_low" id="sortPriceLow">
									Prix : Bas √† √âlev√©
								</option>
								<option value="price_high" id="sortPriceHigh">
									Prix : √âlev√© √† Bas
								</option>
								<option value="name_az" id="sortNameAZ">
									Nom : A-Z
								</option>
								<option value="name_za" id="sortNameZA">
									Nom : Z-A
								</option>
							</select>
						</div>
					</div>

					<div class="view-controls">
						<div class="view-toggle">
							<button
								class="view-btn active"
								id="listViewBtn"
								onclick="toggleView('list')"
							>
								üìã <span id="listViewText">Vue Liste</span>
							</button>
							<button
								class="view-btn"
								id="mapViewBtn"
								onclick="toggleView('map')"
							>
								üó∫Ô∏è <span id="mapViewText">Vue Carte</span>
							</button>
						</div>
						<button
							class="reset-filter-btn"
							onclick="resetFilters()"
							id="resetBtn"
						>
							üîÑ <span id="resetBtnText">R√©initialiser</span>
						</button>
					</div>
				</div>

				<div id="listView" class="view-container">
					<div id="resultsContent"></div>
				</div>

				<div id="mapView" class="view-container" style="display: none">
					<div id="mapContainer" class="map-container">
						<div
							id="mapLeaflet"
							style="
								width: 100%;
								height: 600px;
								border-radius: 15px;
							"
						></div>
					</div>
					<div id="mapLegend" class="map-legend">
						<h4 id="legendTitle">üìç Lieux des formations</h4>
						<div id="legendContent"></div>
					</div>
				</div>

				<div
					id="noResultsMessage"
					class="info-box warning"
					style="display: none"
				>
					<strong id="noResultsText"
						>üòï Aucun r√©sultat trouv√© avec ces crit√®res.</strong
					><br />
					<span id="noResultsHint"
						>Essayez de modifier vos filtres ou r√©initialisez-les
						pour voir tous les cours disponibles.</span
					>
				</div>
			</section>

			<footer>
				<p id="footerText">¬© 2025 Guide des Formations en Fran√ßais</p>
				<p
					id="footerNote"
					style="margin-top: 10px; font-size: 0.9em; color: #666"
				>
					Les informations pr√©sent√©es sont indicatives. Veuillez
					contacter directement les organismes pour plus de d√©tails.
				</p>
			</footer>
		</div>

		<script>
			const userSelection = {
				contract: null,
				poli: null,
				level: null,
			};

			const translations = {
				fr: {
					mainTitle: "Apprenons le fran√ßais √† Besan√ßon",
					subtitle:
						"Trouvez les formations adapt√©es √† votre situation",
					selectionTitle: "Votre Situation",
					selectionDesc:
						"R√©pondez aux questions suivantes pour trouver les formations qui vous correspondent",
					contractQuestion:
						"üìã Avez-vous un contrat CIR (Contrat d'Int√©gration R√©publicaine) ?",
					poliQuestion: "üèõÔ∏è √ätes-vous enregistr√© √† France Travail ?",
					levelQuestion:
						"üìö Quel est votre niveau actuel de fran√ßais ?",
					yesOption: "‚úÖ Oui",
					noOption: "‚ùå Non",
					dontKnowOption: "ü§î Je ne sais pas",
					beginnerOption: "üå± D√©butant (A1-A2)",
					intermediateOption: "üìñ Interm√©diaire (B1-B2)",
					advancedOption: "üéì Avanc√© (C1-C2)",
					findBtnText: "üîç Trouver les formations",
					resultsTitle: "üìö Formations Recommand√©es",
					searchTitle: "üîç Affiner votre recherche",
					searchNameLabel: "üè´ Nom de l'acad√©mie",
					searchPlaceLabel: "üìç Lieu",
					searchResidenceLabel: "üè† O√π habitez-vous ?",
					searchTypeLabel: "üí∞ Type de cours",
					sortLabel: "üìä Trier par",
					sortRecommended: "Recommand√©s d'abord",
					sortPriceLow: "Prix : Bas √† √âlev√©",
					sortPriceHigh: "Prix : √âlev√© √† Bas",
					sortNameAZ: "Nom : A-Z",
					sortNameZA: "Nom : Z-A",
					listViewText: "Vue Liste",
					mapViewText: "Vue Carte",
					legendTitle: "üìç Lieux des formations",
					freeOption: "Gratuit",
					paidOption: "Payant",
					onlineOption: "En ligne",
					inPersonOption: "En personne",
					resetBtnText: "R√©initialiser",
					resetBtn: "üîÑ R√©initialiser les filtres",
					noResultsText:
						"üòï Aucun r√©sultat trouv√© avec ces crit√®res.",
					noResultsHint:
						"Essayez de modifier vos filtres ou r√©initialisez-les pour voir tous les cours disponibles.",
					footerText: "¬© 2025 Guide des Formations en Fran√ßais",
					footerNote:
						"Les informations pr√©sent√©es sont indicatives. Veuillez contacter directement les organismes pour plus de d√©tails.",
				},
				en: {
					mainTitle: "Let's Learn French in Besan√ßon",
					subtitle: "Find courses suited to your situation",
					selectionTitle: "Your Situation",
					selectionDesc:
						"Answer the following questions to find courses that match you",
					contractQuestion:
						"üìã Do you have a CIR contract (Republican Integration Contract)?",
					poliQuestion: "üèõÔ∏è Are you registered with France Travail?",
					levelQuestion: "üìö What is your current French level?",
					yesOption: "‚úÖ Yes",
					noOption: "‚ùå No",
					dontKnowOption: "ü§î I don't know",
					beginnerOption: "üå± Beginner (A1-A2)",
					intermediateOption: "üìñ Intermediate (B1-B2)",
					advancedOption: "üéì Advanced (C1-C2)",
					findBtnText: "üîç Find Courses",
					resultsTitle: "üìö Recommended Courses",
					searchTitle: "üîç Refine your search",
					searchNameLabel: "üè´ Academy name",
					searchPlaceLabel: "üìç Location",
					searchResidenceLabel: "üè† Where do you live?",
					searchTypeLabel: "üí∞ Course type",
					sortLabel: "üìä Sort by",
					sortRecommended: "Recommended first",
					sortPriceLow: "Price: Low to High",
					sortPriceHigh: "Price: High to Low",
					sortNameAZ: "Name: A-Z",
					sortNameZA: "Name: Z-A",
					listViewText: "List View",
					mapViewText: "Map View",
					legendTitle: "üìç Course Locations",
					freeOption: "Free",
					paidOption: "Paid",
					onlineOption: "Online",
					inPersonOption: "In-person",
					resetBtnText: "Reset",
					resetBtn: "üîÑ Reset filters",
					noResultsText: "üòï No results found with these criteria.",
					noResultsHint:
						"Try modifying your filters or reset them to see all available courses.",
					footerText: "¬© 2025 French Course Guide",
					footerNote:
						"The information presented is indicative. Please contact organizations directly for more details.",
				},
				es: {
					mainTitle: "Aprendamos franc√©s en Besan√ßon",
					subtitle: "Encuentra cursos adaptados a tu situaci√≥n",
					selectionTitle: "Tu Situaci√≥n",
					selectionDesc:
						"Responde las siguientes preguntas para encontrar cursos que te correspondan",
					contractQuestion:
						"üìã ¬øTienes un contrato CIR (Contrato de Integraci√≥n Republicana)?",
					poliQuestion: "üèõÔ∏è ¬øEst√°s registrado en France Travail?",
					levelQuestion: "üìö ¬øCu√°l es tu nivel actual de franc√©s?",
					yesOption: "‚úÖ S√≠",
					noOption: "‚ùå No",
					dontKnowOption: "ü§î No lo s√©",
					beginnerOption: "üå± Principiante (A1-A2)",
					intermediateOption: "üìñ Intermedio (B1-B2)",
					advancedOption: "üéì Avanzado (C1-C2)",
					findBtnText: "üîç Buscar Cursos",
					resultsTitle: "üìö Cursos Recomendados",
					searchTitle: "üîç Refinar tu b√∫squeda",
					searchNameLabel: "üè´ Nombre de la academia",
					searchPlaceLabel: "üìç Ubicaci√≥n",
					searchResidenceLabel: "üè† ¬øD√≥nde vives?",
					searchTypeLabel: "üí∞ Tipo de curso",
					sortLabel: "üìä Ordenar por",
					sortRecommended: "Recomendados primero",
					sortPriceLow: "Precio: Bajo a Alto",
					sortPriceHigh: "Precio: Alto a Bajo",
					sortNameAZ: "Nombre: A-Z",
					sortNameZA: "Nombre: Z-A",
					listViewText: "Vista Lista",
					mapViewText: "Vista Mapa",
					legendTitle: "üìç Ubicaciones de cursos",
					freeOption: "Gratis",
					paidOption: "De pago",
					onlineOption: "En l√≠nea",
					inPersonOption: "Presencial",
					resetBtnText: "Restablecer",
					resetBtn: "üîÑ Restablecer filtros",
					noResultsText:
						"üòï No se encontraron resultados con estos criterios.",
					noResultsHint:
						"Intenta modificar tus filtros o restabl√©celos para ver todos los cursos disponibles.",
					footerText: "¬© 2025 Gu√≠a de Cursos de Franc√©s",
					footerNote:
						"La informaci√≥n presentada es indicativa. Contacta directamente a las organizaciones para m√°s detalles.",
				},
				ar: {
					mainTitle: "ŸÑŸÜÿ™ÿπŸÑŸÖ ÿßŸÑŸÅÿ±ŸÜÿ≥Ÿäÿ© ŸÅŸä ÿ®Ÿäÿ≤ÿßŸÜÿ≥ŸàŸÜ",
					subtitle: "ÿßÿπÿ´ÿ± ÿπŸÑŸâ ÿßŸÑÿØŸàÿ±ÿßÿ™ ÿßŸÑŸÖŸÜÿßÿ≥ÿ®ÿ© ŸÑŸàÿ∂ÿπŸÉ",
					selectionTitle: "Ÿàÿ∂ÿπŸÉ",
					selectionDesc:
						"ÿ£ÿ¨ÿ® ÿπŸÑŸâ ÿßŸÑÿ£ÿ≥ÿ¶ŸÑÿ© ÿßŸÑÿ™ÿßŸÑŸäÿ© ŸÑŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ÿßŸÑÿØŸàÿ±ÿßÿ™ ÿßŸÑÿ™Ÿä ÿ™ŸÜÿßÿ≥ÿ®ŸÉ",
					contractQuestion:
						"üìã ŸáŸÑ ŸÑÿØŸäŸÉ ÿπŸÇÿØ CIR (ÿπŸÇÿØ ÿßŸÑÿ™ŸÉÿßŸÖŸÑ ÿßŸÑÿ¨ŸÖŸáŸàÿ±Ÿä)ÿü",
					poliQuestion: "üèõÔ∏è ŸáŸÑ ÿ£ŸÜÿ™ ŸÖÿ≥ÿ¨ŸÑ ŸÅŸä France Travailÿü",
					levelQuestion: "üìö ŸÖÿß ŸáŸà ŸÖÿ≥ÿ™ŸàÿßŸÉ ÿßŸÑÿ≠ÿßŸÑŸä ŸÅŸä ÿßŸÑŸÅÿ±ŸÜÿ≥Ÿäÿ©ÿü",
					yesOption: "‚úÖ ŸÜÿπŸÖ",
					noOption: "‚ùå ŸÑÿß",
					dontKnowOption: "ü§î ŸÑÿß ÿ£ÿπÿ±ŸÅ",
					beginnerOption: "üå± ŸÖÿ®ÿ™ÿØÿ¶ (A1-A2)",
					intermediateOption: "üìñ ŸÖÿ™Ÿàÿ≥ÿ∑ (B1-B2)",
					advancedOption: "üéì ŸÖÿ™ŸÇÿØŸÖ (C1-C2)",
					findBtnText: "üîç ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ÿßŸÑÿØŸàÿ±ÿßÿ™",
					resultsTitle: "üìö ÿßŸÑÿØŸàÿ±ÿßÿ™ ÿßŸÑŸÖŸàÿµŸâ ÿ®Ÿáÿß",
					searchTitle: "üîç ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑÿ®ÿ≠ÿ´",
					searchNameLabel: "üè´ ÿßÿ≥ŸÖ ÿßŸÑÿ£ŸÉÿßÿØŸäŸÖŸäÿ©",
					searchPlaceLabel: "üìç ÿßŸÑŸÖŸàŸÇÿπ",
					searchResidenceLabel: "üè† ÿ£ŸäŸÜ ÿ™ÿπŸäÿ¥ÿü",
					searchTypeLabel: "üí∞ ŸÜŸàÿπ ÿßŸÑÿØŸàÿ±ÿ©",
					sortLabel: "üìä ÿ™ÿ±ÿ™Ÿäÿ® ÿ≠ÿ≥ÿ®",
					sortRecommended: "ÿßŸÑŸÖŸàÿµŸâ ÿ®Ÿáÿß ÿ£ŸàŸÑÿßŸã",
					sortPriceLow: "ÿßŸÑÿ≥ÿπÿ±: ŸÖŸÜ ÿßŸÑÿ£ŸÇŸÑ ŸÑŸÑÿ£ÿπŸÑŸâ",
					sortPriceHigh: "ÿßŸÑÿ≥ÿπÿ±: ŸÖŸÜ ÿßŸÑÿ£ÿπŸÑŸâ ŸÑŸÑÿ£ŸÇŸÑ",
					sortNameAZ: "ÿßŸÑÿßÿ≥ŸÖ: ÿ£-Ÿä",
					sortNameZA: "ÿßŸÑÿßÿ≥ŸÖ: Ÿä-ÿ£",
					listViewText: "ÿπÿ±ÿ∂ ÿßŸÑŸÇÿßÿ¶ŸÖÿ©",
					mapViewText: "ÿπÿ±ÿ∂ ÿßŸÑÿÆÿ±Ÿäÿ∑ÿ©",
					legendTitle: "üìç ŸÖŸàÿßŸÇÿπ ÿßŸÑÿØŸàÿ±ÿßÿ™",
					freeOption: "ŸÖÿ¨ÿßŸÜŸä",
					paidOption: "ŸÖÿØŸÅŸàÿπ",
					onlineOption: "ÿπÿ®ÿ± ÿßŸÑÿ•ŸÜÿ™ÿ±ŸÜÿ™",
					inPersonOption: "ÿ≠ÿ∂Ÿàÿ±Ÿä",
					resetBtnText: "ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ",
					resetBtn: "üîÑ ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜ ÿßŸÑŸÅŸÑÿßÿ™ÿ±",
					noResultsText: "üòï ŸÑŸÖ Ÿäÿ™ŸÖ ÿßŸÑÿπÿ´Ÿàÿ± ÿπŸÑŸâ ŸÜÿ™ÿßÿ¶ÿ¨ ÿ®Ÿáÿ∞Ÿá ÿßŸÑŸÖÿπÿßŸäŸäÿ±.",
					noResultsHint:
						"ÿ≠ÿßŸàŸÑ ÿ™ÿπÿØŸäŸÑ ÿßŸÑŸÅŸÑÿßÿ™ÿ± ÿ£Ÿà ÿ•ÿπÿßÿØÿ© ÿ™ÿπŸäŸäŸÜŸáÿß ŸÑÿ±ÿ§Ÿäÿ© ÿ¨ŸÖŸäÿπ ÿßŸÑÿØŸàÿ±ÿßÿ™ ÿßŸÑŸÖÿ™ÿßÿ≠ÿ©.",
					footerText: "¬© 2025 ÿØŸÑŸäŸÑ ÿØŸàÿ±ÿßÿ™ ÿßŸÑŸÅÿ±ŸÜÿ≥Ÿäÿ©",
					footerNote:
						"ÿßŸÑŸÖÿπŸÑŸàŸÖÿßÿ™ ÿßŸÑŸÖŸÇÿØŸÖÿ© ÿ•ÿ±ÿ¥ÿßÿØŸäÿ©. Ÿäÿ±ÿ¨Ÿâ ÿßŸÑÿßÿ™ÿµÿßŸÑ ÿ®ÿßŸÑŸÖŸÜÿ∏ŸÖÿßÿ™ ŸÖÿ®ÿßÿ¥ÿ±ÿ© ŸÑŸÖÿ≤ŸäÿØ ŸÖŸÜ ÿßŸÑÿ™ŸÅÿßÿµŸäŸÑ.",
				},
			};

			function changeLanguage() {
				const lang = document.getElementById("languageSelect").value;
				const t = translations[lang];

				Object.keys(t).forEach((key) => {
					const element = document.getElementById(key);
					if (element) {
						element.textContent = t[key];
					}
				});

				document.getElementById("yesOption2").textContent = t.yesOption;
				document.getElementById("noOption2").textContent = t.noOption;
				document.getElementById("dontKnowOption2").textContent =
					t.dontKnowOption;

				if (lang === "ar") {
					document.documentElement.setAttribute("dir", "rtl");
				} else {
					document.documentElement.setAttribute("dir", "ltr");
				}
			}

			function selectOption(category, value, button) {
				const allButtons =
					button.parentElement.querySelectorAll(".option-btn");
				allButtons.forEach((btn) => btn.classList.remove("selected"));
				button.classList.add("selected");

				userSelection[category] = value;

				checkAllSelected();
			}

			function checkAllSelected() {
				const allSelected =
					userSelection.contract &&
					userSelection.poli &&
					userSelection.level;
				document.getElementById("findCoursesBtn").disabled =
					!allSelected;
			}

			function findCourses() {
				const resultsSection =
					document.getElementById("resultsSection");
				const resultsContent =
					document.getElementById("resultsContent");

				allCourses = getRecommendedCourses();

				resultsContent.innerHTML = generateResultsHTML(allCourses);
				resultsSection.classList.add("show");

				// Reset filters when showing new results
				resetFilters();

				resultsSection.scrollIntoView({
					behavior: "smooth",
					block: "start",
				});
			}

			function getRecommendedCourses() {
				const { contract, poli, level } = userSelection;
				let courses = [];

				// With CIR contract
				if (contract === "oui") {
					courses.push({
						name: "Formation Linguistique OFII",
						type: "Gratuit",
						description:
							"Formation de fran√ßais dans le cadre du Contrat d'Int√©gration R√©publicaine (CIR)",
						duration: "50 √† 200 heures selon √©valuation",
						price: "GRATUIT (financ√© par l'√âtat)",
						priceValue: 0,
						level: "A1 √† B1",
						location:
							"Centres agr√©√©s OFII - Besan√ßon : 2 Rue Charles Nodier, 25000",
						contact: "üìû 01 53 69 53 70 | üåê www.ofii.fr",
						details: [
							"Objectif : Atteindre le niveau A1 minimum (oral)",
							"Formation civique incluse (4 jours)",
							"Certification DILF ou DELF √† la fin",
							"Obligation pour les signataires du CIR",
						],
						recommended: true,
						courseType: "gratuit",
						deliveryMode: "en_personne",
						searchableLocation: "Besan√ßon centre OFII Nodier",
						searchableName: "OFII formation linguistique CIR",
						coordinates: { lat: 47.238, lng: 6.0243 },
						address: "2 Rue Charles Nodier, 25000 Besan√ßon",
					});
				}

				// With France Travail registration
				if (poli === "oui") {
					courses.push({
						name: "Ateliers Sociolinguistiques (ASL)",
						type: "Gratuit",
						description:
							"Cours de fran√ßais orient√©s vers l'insertion sociale et professionnelle",
						duration: "Variable (g√©n√©ralement 3-6 mois)",
						price: "GRATUIT",
						priceValue: 0,
						level: "Tous niveaux",
						location:
							"Centres sociaux Besan√ßon : Maison de quartier Planoise, Centre Nelson Mandela",
						contact:
							"Renseignez-vous aupr√®s de votre mairie ou France Travail",
						details: [
							"Apprentissage du fran√ßais dans des situations r√©elles",
							"Aide aux d√©marches administratives",
							"Rencontres et socialisation",
							"Horaires flexibles",
						],
						recommended: true,
						courseType: "gratuit",
						deliveryMode: "en_personne",
						searchableLocation:
							"Besan√ßon Planoise Nelson Mandela centre social",
						searchableName: "ASL ateliers sociolinguistiques",
						coordinates: { lat: 47.2502, lng: 6.0157 },
						address: "Quartier Planoise, 25000 Besan√ßon",
					});
				}

				// General courses for everyone
				courses.push({
					name: "Alliance Fran√ßaise",
					type: "Payant",
					description:
						"R√©seau mondial d'enseignement du fran√ßais langue √©trang√®re",
					duration: "Cours intensifs ou extensifs (1-12 mois)",
					price: "300‚Ç¨ - 1500‚Ç¨ selon formule",
					priceValue: 300,
					level: "A1 √† C2",
					location:
						"Alliance Fran√ßaise Franche-Comt√© - 3 Rue Lecourbe, 25000 Besan√ßon",
					contact: "üìû 03 81 25 04 20 | üåê www.alliancefr.org",
					details: [
						"M√©thode reconnue internationalement",
						"Pr√©paration aux examens DELF/DALF",
						"Activit√©s culturelles incluses",
						"Attestations et dipl√¥mes officiels",
					],
					tags: ["Qualit√© reconnue", "Pr√©paration examens"],
					courseType: "payant",
					deliveryMode: "en_personne",
					searchableLocation: "Besan√ßon Lecourbe centre-ville",
					searchableName: "Alliance Fran√ßaise Franche-Comt√©",
					coordinates: { lat: 47.2378, lng: 6.0245 },
					address: "3 Rue Lecourbe, 25000 Besan√ßon",
				});

				courses.push({
					name: "Cours Municipaux pour Adultes (CMA)",
					type: "Payant √©conomique",
					description: "Cours de fran√ßais propos√©s par les villes",
					duration: "Ann√©e scolaire (octobre √† juin)",
					price: "60‚Ç¨ - 150‚Ç¨ l'ann√©e",
					priceValue: 60,
					level: "A1 √† C1",
					location: "Mairie de Besan√ßon et √©tablissements municipaux",
					contact: "üìû Mairie de Besan√ßon : 03 81 87 80 00",
					details: [
						"Tarifs tr√®s accessibles",
						"Cours en soir√©e ou week-end",
						"Pour r√©sidents de Besan√ßon",
						"Inscription en juin-septembre",
					],
					tags: ["Prix abordable", "Proximit√©"],
					courseType: "payant",
					deliveryMode: "en_personne",
					searchableLocation: "Besan√ßon mairie municipal",
					searchableName: "CMA cours municipaux adultes",
					coordinates: { lat: 47.2372, lng: 6.024 },
					address: "2 Rue M√©gevand, 25000 Besan√ßon",
				});

				courses.push({
					name: "MOOC et Cours en Ligne",
					type: "Gratuit/Payant",
					description:
						"Plateformes d'apprentissage du fran√ßais en ligne",
					duration: "√Ä votre rythme",
					price: "Gratuit √† 50‚Ç¨/mois",
					priceValue: 0,
					level: "A1 √† C2",
					location:
						"En ligne (accessible depuis Besan√ßon ou partout)",
					contact:
						"üåê TV5MONDE, Duolingo, Babbel, FrancaisFacile.com",
					details: [
						"Flexibilit√© totale des horaires",
						"Exercices interactifs",
						"Vid√©os et audio authentiques",
						"Communaut√© d'apprenants",
					],
					tags: ["Flexible", "√âconomique", "Autonomie"],
					courseType: "en_ligne",
					deliveryMode: "en_ligne",
					searchableLocation: "en ligne internet distance",
					searchableName: "MOOC cours ligne TV5 Duolingo Babbel",
					coordinates: null,
					address: "En ligne",
				});

				// Additional courses based on level
				if (level === "avance") {
					courses.push({
						name: "Cours Universitaires FLE - Universit√© de Franche-Comt√©",
						type: "Payant",
						description:
							"Dipl√¥mes universitaires en Fran√ßais Langue √âtrang√®re",
						duration: "1 semestre √† 2 ans",
						price: "500‚Ç¨ - 3000‚Ç¨ selon dipl√¥me",
						priceValue: 500,
						level: "B2 √† C2",
						location: "UFR SLHS - 30 Rue M√©gevand, 25030 Besan√ßon",
						contact: "üìû 03 81 66 53 37 | üåê www.univ-fcomte.fr",
						details: [
							"DU, Licence ou Master FLE",
							"Reconnaissance acad√©mique",
							"Acc√®s aux ressources universitaires",
							"Possibilit√© de bourses",
						],
						tags: ["Dipl√¥me universitaire", "Niveau avanc√©"],
						courseType: "payant",
						deliveryMode: "en_personne",
						searchableLocation:
							"Besan√ßon M√©gevand universit√© UFC SLHS",
						searchableName: "UFC universit√© Franche-Comt√© FLE",
						coordinates: { lat: 47.2365, lng: 6.0237 },
						address: "30 Rue M√©gevand, 25030 Besan√ßon",
					});
				}

				if (contract === "non" && poli === "non") {
					courses.push({
						name: "Associations B√©n√©voles",
						type: "Gratuit",
						description:
							"Cours de fran√ßais donn√©s par des b√©n√©voles",
						duration: "Variable (g√©n√©ralement toute l'ann√©e)",
						price: "GRATUIT ou participation symbolique (5-20‚Ç¨)",
						priceValue: 0,
						level: "Tous niveaux",
						location:
							"Besan√ßon : Secours Catholique, Croix-Rouge, associations de quartier",
						contact:
							"Secours Catholique : 03 81 81 20 25 | Croix-Rouge : 03 81 47 91 00",
						details: [
							"Ambiance conviviale et bienveillante",
							"Petits groupes",
							"√âchanges culturels",
							"Sans condition de ressources",
						],
						tags: ["Solidarit√©", "Proximit√©", "Gratuit"],
						courseType: "gratuit",
						deliveryMode: "en_personne",
						searchableLocation: "Besan√ßon association quartier",
						searchableName:
							"association b√©n√©vole Secours Catholique Croix Rouge",
						coordinates: { lat: 47.238, lng: 6.025 },
						address: "Diverses locations √† Besan√ßon",
					});
				}

				return courses;
			}

			function generateResultsHTML(courses) {
				let infoBoxHTML = "";

				if (userSelection.contract === "oui") {
					infoBoxHTML += `
                    <div class="info-box success">
                        <strong>‚úÖ Excellente nouvelle !</strong><br>
                        Avec votre contrat CIR, vous avez droit √† une formation gratuite de fran√ßais financ√©e par l'√âtat fran√ßais. C'est une obligation mais aussi un droit pr√©cieux. Contactez l'OFII rapidement !
                    </div>
                `;
				}

				if (userSelection.contract === "ne_sais_pas") {
					infoBoxHTML += `
                    <div class="info-box warning">
                        <strong>‚ùì Qu'est-ce que le CIR ?</strong><br>
                        Le Contrat d'Int√©gration R√©publicaine (CIR) est un parcours obligatoire pour les primo-arrivants en France. Si vous √™tes r√©cemment arriv√©(e) avec un titre de s√©jour, vous devriez avoir sign√© ce contrat √† l'OFII. V√©rifiez vos documents ou contactez l'OFII au 01 53 69 53 70.
                    </div>
                `;
				}

				if (userSelection.poli === "ne_sais_pas") {
					infoBoxHTML += `
                    <div class="info-box warning">
                        <strong>‚ùì Qu'est-ce que France Travail ?</strong><br>
                        France Travail (anciennement P√¥le Emploi) est le service public de l'emploi en France. Si vous √™tes inscrit(e) comme demandeur d'emploi, vous pouvez b√©n√©ficier de formations gratuites en fran√ßais. Renseignez-vous aupr√®s de votre conseiller.
                    </div>
                `;
				}

				return infoBoxHTML + generateCoursesHTML(courses);
			}

			document.addEventListener("DOMContentLoaded", function () {
				changeLanguage();
			});

			let allCourses = [];
			let currentView = "list";

			function sortResults() {
				const sortBy = document.getElementById("sortBy").value;

				// Sort allCourses array
				switch (sortBy) {
					case "recommended":
						allCourses.sort((a, b) => {
							if (a.recommended && !b.recommended) return -1;
							if (!a.recommended && b.recommended) return 1;
							return 0;
						});
						break;
					case "price_low":
						allCourses.sort((a, b) => a.priceValue - b.priceValue);
						break;
					case "price_high":
						allCourses.sort((a, b) => b.priceValue - a.priceValue);
						break;
					case "name_az":
						allCourses.sort((a, b) => a.name.localeCompare(b.name));
						break;
					case "name_za":
						allCourses.sort((a, b) => b.name.localeCompare(a.name));
						break;
				}

				// Re-render results
				const resultsContent =
					document.getElementById("resultsContent");
				resultsContent.innerHTML = generateCoursesHTML(allCourses);

				// Re-apply filters
				filterResults();
			}

			function toggleView(view) {
				currentView = view;

				const listView = document.getElementById("listView");
				const mapView = document.getElementById("mapView");
				const listBtn = document.getElementById("listViewBtn");
				const mapBtn = document.getElementById("mapViewBtn");

				if (view === "list") {
					listView.style.display = "block";
					mapView.style.display = "none";
					listBtn.classList.add("active");
					mapBtn.classList.remove("active");
				} else {
					listView.style.display = "none";
					mapView.style.display = "block";
					listBtn.classList.remove("active");
					mapBtn.classList.add("active");

					// Delay map update to ensure container is visible
					setTimeout(() => {
						updateMap();
						if (map) {
							map.invalidateSize();
						}
					}, 100);
				}
			}

			let map = null;
			let markers = [];
			let leafletLoaded = false;

			// Wait for Leaflet to load
			window.addEventListener("load", function () {
				if (typeof L !== "undefined") {
					leafletLoaded = true;
				}
			});

			function updateMap() {
				// Check if Leaflet is loaded
				if (typeof L === "undefined") {
					console.error("Leaflet is not loaded yet");
					// Retry after a short delay
					setTimeout(updateMap, 500);
					return;
				}

				// Filter courses that have coordinates (in-person courses in Besan√ßon)
				const mappableCourses = allCourses.filter(
					(course) => course.coordinates
				);

				// Initialize map if not already done
				if (!map) {
					try {
						map = L.map("mapLeaflet").setView([47.238, 6.0243], 13);

						// Add OpenStreetMap tiles
						L.tileLayer(
							"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",
							{
								attribution: "¬© OpenStreetMap contributors",
								maxZoom: 19,
							}
						).addTo(map);
					} catch (error) {
						console.error("Error initializing map:", error);
						return;
					}
				}

				// Clear existing markers
				markers.forEach((marker) => map.removeLayer(marker));
				markers = [];

				// Add markers for each course
				mappableCourses.forEach((course, index) => {
					if (course.coordinates) {
						const marker = L.marker([
							course.coordinates.lat,
							course.coordinates.lng,
						]).addTo(map).bindPopup(`
                            <div style="min-width: 200px;">
                                <strong style="color: #0055A4; font-size: 1.1em;">${course.name}</strong><br>
                                <span style="color: #28a745; font-weight: bold;">${course.price}</span><br>
                                <small>${course.address}</small><br>
                                <small style="color: #666;">${course.contact}</small>
                            </div>
                        `);
						markers.push(marker);
					}
				});

				// Fit map to show all markers
				if (markers.length > 0) {
					const group = L.featureGroup(markers);
					map.fitBounds(group.getBounds().pad(0.1));
				}

				// Update legend
				const legendContent = document.getElementById("legendContent");
				legendContent.innerHTML = mappableCourses
					.map(
						(course, index) => `
                <div class="legend-item" onclick="focusMarker(${index})">
                    <span class="legend-marker">üìç</span>
                    <div class="legend-info">
                        <div class="legend-name">${course.name}</div>
                        <div class="legend-address">${course.address}</div>
                    </div>
                </div>
            `
					)
					.join("");
			}

			function focusMarker(index) {
				if (markers[index]) {
					const marker = markers[index];
					map.setView(marker.getLatLng(), 15);
					marker.openPopup();
				}
			}

			function generateCoursesHTML(courses) {
				return courses
					.map(
						(course) => `
                <div class="course-card">
                    <div class="course-header">
                        <div>
                            <span class="course-title">${course.name}</span>
                            ${
								course.recommended
									? '<span class="recommendation-badge">‚≠ê RECOMMAND√â</span>'
									: ""
							}
                        </div>
                        <span class="course-price ${
							course.type === "Gratuit" ? "free" : "paid"
						}">
                            ${course.price}
                        </span>
                    </div>
                    
                    <p style="margin: 15px 0; font-size: 1.05em;">${
						course.description
					}</p>
                    
                    <div class="course-details">
                        <div class="detail-item">
                            <span class="detail-icon">‚è±Ô∏è</span>
                            <strong>Dur√©e :</strong> ${course.duration}
                        </div>
                        <div class="detail-item">
                            <span class="detail-icon">üìä</span>
                            <strong>Niveau :</strong> ${course.level}
                        </div>
                        <div class="detail-item">
                            <span class="detail-icon">üìç</span>
                            <strong>Lieu :</strong> ${course.location}
                        </div>
                    </div>

                    <div style="margin: 15px 0;">
                        <strong>Points cl√©s :</strong>
                        <ul style="margin-left: 20px; margin-top: 10px;">
                            ${course.details
								.map((detail) => `<li>${detail}</li>`)
								.join("")}
                        </ul>
                    </div>

                    ${
						course.tags
							? `
                        <div style="margin: 15px 0;">
                            ${course.tags
								.map(
									(tag) =>
										`<span class="course-tag">${tag}</span>`
								)
								.join("")}
                        </div>
                    `
							: ""
					}

                    <div class="contact-info">
                        <strong>üìû Contact :</strong> ${course.contact}
                    </div>
                </div>
            `
					)
					.join("");
			}

			function filterResults() {
				const searchName = document
					.getElementById("searchName")
					.value.toLowerCase();
				const searchPlace = document
					.getElementById("searchPlace")
					.value.toLowerCase();
				const searchResidence = document
					.getElementById("searchResidence")
					.value.toLowerCase();
				const searchType = document.getElementById("searchType").value;

				const courseCards = document.querySelectorAll(".course-card");
				let visibleCount = 0;

				courseCards.forEach((card, index) => {
					const course = allCourses[index];
					if (!course) return;

					let showCard = true;

					// Filter by name
					if (
						searchName &&
						!course.searchableName
							.toLowerCase()
							.includes(searchName)
					) {
						showCard = false;
					}

					// Filter by place
					if (
						searchPlace &&
						!course.searchableLocation
							.toLowerCase()
							.includes(searchPlace)
					) {
						showCard = false;
					}

					// Filter by residence (same as place for simplicity)
					if (
						searchResidence &&
						!course.searchableLocation
							.toLowerCase()
							.includes(searchResidence)
					) {
						showCard = false;
					}

					// Filter by type
					if (searchType) {
						if (
							searchType === "gratuit" &&
							course.courseType !== "gratuit" &&
							course.courseType !== "en_ligne"
						) {
							showCard = false;
						} else if (
							searchType === "payant" &&
							course.courseType !== "payant"
						) {
							showCard = false;
						} else if (
							searchType === "en_ligne" &&
							course.deliveryMode !== "en_ligne"
						) {
							showCard = false;
						} else if (
							searchType === "en_personne" &&
							course.deliveryMode !== "en_personne"
						) {
							showCard = false;
						}
					}

					if (showCard) {
						card.classList.remove("hidden");
						visibleCount++;
					} else {
						card.classList.add("hidden");
					}
				});

				// Show/hide no results message
				const noResultsMessage =
					document.getElementById("noResultsMessage");
				if (visibleCount === 0) {
					noResultsMessage.style.display = "block";
				} else {
					noResultsMessage.style.display = "none";
				}
			}

			function resetFilters() {
				document.getElementById("searchName").value = "";
				document.getElementById("searchPlace").value = "";
				document.getElementById("searchResidence").value = "";
				document.getElementById("searchType").value = "";

				const courseCards = document.querySelectorAll(".course-card");
				courseCards.forEach((card) => {
					card.classList.remove("hidden");
				});

				document.getElementById("noResultsMessage").style.display =
					"none";
			}
		</script>
	</body>
</html>
